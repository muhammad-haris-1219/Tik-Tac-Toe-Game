<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tik Tak Toe</title>
    <style>
        body {
            background: #142126;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;

        }

        #container {
            width: 70%;
            height: 75vh;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            flex-direction: column;

        }

        .boxes {
            width: 50%;
            height: 90%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-direction: column;
        }

        .box {
            width: 100%;
            height: 100%;
        }

        .btn {
            width: calc(100%/3);
            height: 100%;
            margin: auto;
            border: 1px solid #121e22;
            background: #203740;
            color: #34BFB1;
            font-size: 300%;
        }

        .btn:active {
            background: #142126;
            border: 2px solid #203740;
        }

        .alertBox {
            width: 40%;
            height: 50%;
            background: #a3bfb7;
            text-align: center;
            display: none;
            justify-content: space-evenly;
            align-items: center;
            flex-direction: column;
            border-radius: 20px;
            font-weight: bolder;
            font-size: larger;
        }

        .NGbtn {
            background: #f2b138;
            border-radius: 5px;
            border: none;
            width: 35%;
            height: 15%;
            font: small-caps bold 100% Georgia;
        }

        .NGbtn:active {
            width: 40%;
        }

        .resetBtn {
            background: #43bfb1;
            border-radius: 5px;
            border: none;
            margin: 1%;
            width: 20%;
            height: 10%;
            font: small-caps bold 100% Georgia;
        }

        .resetBtn:active {
            background: none;
            color: #43bfb1;
            border-radius: 5px;
            border: 2px double #43bfb1;
            width: 20%;
            height: 10%;
            font: small-caps bold 150% Georgia;
        }


        @media all and (min-width: 280px) and (max-width:780px) {

            #container {
                width: 100%;
                height: 80vh;
                justify-content: space-between;
            }

            .boxes {
                width: 100%;
                height: 65%;
            }

            .alertBox {
                width: 90%;
                height: 30%;
                justify-content: space-around;
                padding-bottom: 1%;
                font-weight: bolder;
            }

            .resetBtn {
                width: 40%;
                font: small-caps bold 100% Georgia;
            }

            .resetBtn:active {
                width: 40%;
                font: small-caps bold 130% Georgia;
            }
        }
    </style>
</head>

<body>
    <div id="container">

        <div class="boxes">
            <div class="box"><button class="btn"></button><button class="btn"></button><button class="btn"></button>
            </div>
            <div class="box"><button class="btn"></button class="btn"><button class="btn"></button><button
                    class="btn"></button></div>
            <div class="box"><button class="btn"></button><button class="btn"></button><button class="btn"></button>
            </div>
        </div>
        <div class="alertBox">
            <p>Player</p>
            <p>What'll be Happened?</p>
            <button class="NGbtn">New Game</button>
        </div>
        <button class="resetBtn">Reset Game</button>
    </div>
    <script>
        let container = document.getElementById('container');
        let buttons = document.getElementsByClassName('btn');
        let NGbtn = document.getElementsByClassName('NGbtn');
        let playerTurn = document.getElementsByTagName('p')[0];
        let msg = document.getElementsByTagName('p')[1];
        let alertBox = document.getElementsByClassName('alertBox')[0];
        let resetBtn = document.getElementsByClassName('resetBtn')[0];
        let turn = true;
        const patterns = [
            [0, 1, 2],
            [3, 4, 5],
            [6, 7, 8],
            [0, 3, 6],
            [1, 4, 7],
            [2, 5, 8],
            [0, 4, 8],
            [2, 4, 6]
        ];

        let buttonDisabled = () => {
            for (btn of buttons) {
                btn.disabled = true;
            }
        };

        NGbtn[0].addEventListener('click', () => {
            window.location.reload(true);
        });

        resetBtn.addEventListener('click', () => {
            for (btn of buttons) {
                btn.innerText = "";
                btn.disabled = false;
            };
        });

        for (let btn of buttons) {
            btn.addEventListener('click', () => {
                if (turn) {
                    btn.style.color = '#43bfb1'
                    btn.innerHTML = '✔';
                    playerTurn.innerText = 'Player Turn: ◯'
                    turn = false;
                } else {
                    btn.style.color = '#f29e38';
                    btn.innerHTML = 'Ｏ';
                    playerTurn.innerText = 'Player Turn: ✔';
                    turn = true;
                }
                btn.disabled = true;
                checkWinning()
            })
        };

        let checkWinning = () => {
            for (let i of patterns) {
                let pattval = buttons[i[0]].innerHTML;
                let pattval1 = buttons[i[1]].innerHTML;
                let pattval2 = buttons[i[2]].innerHTML;
                if (pattval != "" && pattval1 != "" && pattval2 != "") {
                    if (pattval == pattval1 && pattval1 == pattval2) {
                        msg.innerText = `This game has been won by ${pattval}`;
                        console.log('winning ', pattval);
                        buttonDisabled();
                        resetBtn.style.display = 'none';
                        alertBox.style.display = 'flex';
                        if (screen.width >= 780) {
                            container.style.flexDirection = 'row';
                        }
                        else {
                            container.style.flexDirection = 'column-reverse';
                        }

                    };
                };
            };
        };
    </script>
</body>

</html>